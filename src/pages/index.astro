---
import { config } from '../config.js';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}favicon.svg`} />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="generator" content={Astro.generator} />
		<title>The Future of Digital Advertising | Mobile Preview</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
				line-height: 1.6;
				color: #2d3748;
				background: #e5e7eb;
			}

			/* Desktop: Phone frame wrapper with background */
			@media (min-width: 768px) {
				body {
					background: linear-gradient(180deg, #4a5568 0%, #2d3748 100%);
					min-height: 100vh;
					display: flex;
					align-items: center;
					justify-content: center;
					padding: 60px 20px;
				}

				body::before {
					content: '';
					position: fixed;
					top: 0;
					left: 0;
					width: 100%;
					height: 100%;
					background: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&q=80') center/cover;
					opacity: 0.3;
					z-index: -1;
				}
			}

			/* Phone Frame Container (Desktop only) */
			.phone-frame {
				position: relative;
				width: 100%;
			}

			@media (min-width: 768px) {
				.phone-frame {
					width: 375px;
					background: #1a1a1a;
					border-radius: 50px;
					padding: 15px;
					box-shadow:
						0 30px 60px rgba(0, 0, 0, 0.5),
						0 0 0 1px rgba(255, 255, 255, 0.1),
						inset 0 0 0 1px rgba(255, 255, 255, 0.05);
					position: relative;
				}

				/* iPhone notch */
				.phone-frame::before {
					content: '';
					position: absolute;
					top: 15px;
					left: 50%;
					transform: translateX(-50%);
					width: 150px;
					height: 30px;
					background: #1a1a1a;
					border-radius: 0 0 20px 20px;
					z-index: 100;
				}

				/* Camera dot */
				.phone-frame::after {
					content: '';
					position: absolute;
					top: 24px;
					left: 50%;
					transform: translateX(-40px);
					width: 10px;
					height: 10px;
					background: #2a2a2a;
					border-radius: 50%;
					z-index: 101;
				}
			}

			/* Phone Screen */
			.phone-screen {
				width: 100%;
				background: white;
				overflow: hidden;
				position: relative;
			}

			@media (min-width: 768px) {
				.phone-screen {
					border-radius: 35px;
					height: 812px;
					overflow-y: auto;
					overflow-x: hidden;
					/* Hide scrollbar */
					scrollbar-width: none; /* Firefox */
					-ms-overflow-style: none; /* IE/Edge */
				}

				.phone-screen::-webkit-scrollbar {
					display: none; /* Chrome/Safari/Opera */
				}

				/* Browser Chrome (Top) */
				.browser-chrome-top {
					display: none;
					position: sticky;
					top: 0;
					width: 100%;
					height: 44px;
					background: #f7f7f7;
					border-bottom: 1px solid #d1d1d1;
					z-index: 90;
					padding: 8px 12px;
				}

				.address-bar {
					background: white;
					border-radius: 8px;
					padding: 6px 12px;
					font-size: 13px;
					color: #666;
					border: 1px solid #d1d1d1;
					display: flex;
					align-items: center;
					gap: 8px;
				}

				.address-bar::before {
					content: '🔒';
					font-size: 12px;
				}

				/* Browser Chrome (Bottom) */
				.browser-chrome-bottom {
					display: flex;
					position: sticky;
					bottom: 0;
					width: 100%;
					height: 50px;
					background: rgba(247, 247, 247, 0.95);
					backdrop-filter: blur(20px);
					border-top: 1px solid #d1d1d1;
					z-index: 90;
					align-items: center;
					justify-content: space-around;
					padding: 0 20px;
				}

				.nav-button {
					font-size: 24px;
					color: #007AFF;
					opacity: 0.6;
				}
			}

			@media (max-width: 767px) {
				.browser-chrome-top,
				.browser-chrome-bottom {
					display: none;
				}
			}

			/* Mobile Content Container */
			.container {
				width: 100%;
				max-width: 375px;
				margin: 0 auto;
				background: white;
				min-height: 100vh;
			}

			.blog-header {
				padding: 30px 20px 20px;
				background: white;
				border-bottom: 1px solid #e5e7eb;
			}

			.blog-header h1 {
				font-size: 1.5rem;
				margin-bottom: 0.8rem;
				font-weight: 700;
				color: #1a202c;
				line-height: 1.3;
			}

			.blog-meta {
				font-size: 0.75rem;
				color: #6b7280;
				font-weight: 400;
			}

			.content-section {
				padding: 20px;
			}

			.ad-unit + .content-section {
				margin-top: 40px;
			}

			.content-section h2 {
				font-size: 1.25rem;
				margin-bottom: 0.75rem;
				color: #1a202c;
				font-weight: 600;
			}

			.content-section p {
				font-size: 0.95rem;
				line-height: 1.7;
				margin-bottom: 1rem;
				color: #4a5568;
				font-weight: 400;
			}

			/* Mobile Ad Unit Styles */
			.ad-unit {
				width: 100%;
				height: 400px;
				margin: 30px 0;
				position: relative;
				overflow: hidden;
				background: #e2e8f0;
				border-top: 1px solid #cbd5e0;
				border-bottom: 1px solid #cbd5e0;
			}

			.ad-label {
				position: absolute;
				top: 8px;
				left: 8px;
				background: rgba(0, 0, 0, 0.5);
				color: white;
				padding: 3px 6px;
				font-size: 0.65rem;
				border-radius: 3px;
				z-index: 10;
				text-transform: uppercase;
				letter-spacing: 0.5px;
			}

			.ad-content {
				width: 100%;
				height: 100%;
				display: flex;
				align-items: center;
				justify-content: center;
				position: relative;
			}

			/* Creative Structure - Mobile optimized */
			.creative-wrapper {
				width: 100%;
				height: 100%;
				display: flex;
				flex-direction: column;
				position: relative;
			}

			/* Top section: Products side-by-side */
			.creative-top {
				flex: 1;
				display: flex;
				background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
			}

			/* Product Main (Left): 187.5px x 320px */
			.product-main {
				flex: 1;
				background: linear-gradient(135deg, #FFA500 0%, #FFD700 100%);
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 1.5rem;
				color: white;
				text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
				background-size: cover;
				background-position: center;
				/* Mobile: 187.5px × 320px - To replace: background-image: url('/creatives/mobile-product-main-1.jpg'); */
			}

			/* Product Secondary (Right): 187.5px x 320px */
			.product-secondary {
				flex: 1;
				background: linear-gradient(135deg, #4169E1 0%, #87CEEB 100%);
				background-size: cover;
				background-position: center;
				/* Mobile: 187.5px × 320px - To replace: background-image: url('/creatives/mobile-product-secondary-1.jpg'); */
			}

			/* CTA Banner (Bottom): 375px x 80px */
			.cta-banner {
				height: 80px;
				background: linear-gradient(135deg, #FFE135 0%, #FFF200 100%);
				display: flex;
				align-items: center;
				justify-content: center;
				font-weight: bold;
				color: #333;
				font-size: 0.95rem;
				background-size: cover;
				background-position: center;
				/* Mobile: 375px × 80px - To replace: background-image: url('/creatives/mobile-cta-banner-1.jpg'); */
			}

			/* ============================================ */
			/* AD UNIT 1 - STACKED LAYERS (SCOPED) */
			/* ============================================ */

			[data-ad="unit-1"] {
				overflow: visible;
			}

			[data-ad="unit-1"] .ad-content {
				overflow: hidden;
			}

			/* Wrapper keeps flexbox for height, but positions children absolutely */
			[data-ad="unit-1"] .creative-wrapper.parallax-up {
				position: relative;
				z-index: 2; /* ensure moving layers sit above fixed background */
			}

			/* FIXED LAYERS (outside wrapper - don't scroll) */
			[data-ad="unit-1"] .layer-background {
				position: absolute;
				width: 100%;
				height: 100%;
				top: 0;
				left: 0;
				pointer-events: none;
				background-repeat: no-repeat;
			}

			/* Layer 1: Background - fixed behind */
			[data-ad="unit-1"] .layer-background {
				z-index: 1;
				background-size: cover;
				background-position: center;
			}

			[data-ad="unit-1"] .rock-overlay {
				position: absolute;
				left: 50%;
				bottom: 0;
				width: clamp(340px, 100%, 420px);
				height: clamp(140px, 40vw, 200px);
				transform: translate(-50%, 45%);
				background-repeat: no-repeat;
				background-position: center top;
				background-size: contain;
				pointer-events: none;
				z-index: 12;
			}

			/* MOVING LAYERS (inside wrapper - scroll with parallax) */
			[data-ad="unit-1"] .layer-text,
			[data-ad="unit-1"] .layer-car {
				position: absolute;
				width: 100%;
				height: 100%;
				top: 0;
				left: 0;
				background-size: contain;
				background-position: center;
				background-repeat: no-repeat;
				pointer-events: none;
			}

			/* Layer ordering */
			[data-ad="unit-1"] .layer-text {
				z-index: 2;
			}

			[data-ad="unit-1"] .layer-car {
				z-index: 3;
			}

			/* QR Code (Desktop only) */
			.qr-code {
				display: none;
			}

			/* Easter Egg Modal */
			.easter-egg-modal {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.8);
				z-index: 9999;
				align-items: center;
				justify-content: center;
			}

			.easter-egg-modal.active {
				display: flex;
			}

			.easter-egg-content {
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				padding: 40px;
				border-radius: 20px;
				text-align: center;
				max-width: 500px;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
				animation: modalBounce 0.5s ease-out;
			}

			@keyframes modalBounce {
				0% { transform: scale(0); }
				50% { transform: scale(1.1); }
				100% { transform: scale(1); }
			}

			.easter-egg-content h2 {
				font-size: 2.5rem;
				color: #fff;
				margin-bottom: 20px;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
			}

			.easter-egg-content p {
				font-size: 1.2rem;
				color: #fff;
				margin-bottom: 30px;
			}

			.easter-egg-close {
				background: white;
				color: #667eea;
				border: none;
				padding: 12px 30px;
				font-size: 1rem;
				font-weight: bold;
				border-radius: 50px;
				cursor: pointer;
				transition: transform 0.2s;
			}

			.easter-egg-close:hover {
				transform: scale(1.1);
			}

			/* ============================================ */
			/* AD UNIT 2 - FALLING STACK (SCOPED) */
			/* ============================================ */

			[data-ad="unit-2"] {
				overflow: visible;
				margin-top: clamp(8px, 14vw, 60px);
			}

			[data-ad="unit-2"] .tree-overlay {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: clamp(110px, 37vw, 160px);
				background-repeat: no-repeat;
				background-position: center bottom;
				background-size: contain;
				transform: translateY(calc(-100% + 12px));
				pointer-events: none;
				z-index: 5;
			}

			[data-ad="unit-2"] .ad-content {
				overflow: visible;
			}

			[data-ad="unit-2"] .ad-viewport {
				position: relative;
				width: 100%;
				height: 100%;
				overflow: hidden;
			}

			[data-ad="unit-2"] .creative-wrapper.parallax-down {
				position: relative;
				z-index: 2; /* ensure moving layers sit above fixed background */
			}

			/* Fixed layers (outside wrapper) */
			[data-ad="unit-2"] .layer-background,
			[data-ad="unit-2"] .layer-foreground,
			[data-ad="unit-2"] .layer-logo {
				position: absolute;
				width: 100%;
				height: 100%;
				top: 0;
				left: 0;
				pointer-events: none;
				background-repeat: no-repeat;
			}

			[data-ad="unit-2"] .layer-background {
				z-index: 1;
				background-size: cover;
				background-position: center;
			}

			[data-ad="unit-2"] .layer-foreground {
				z-index: 4;
				background-size: contain;
				background-position: center bottom;
			}

			[data-ad="unit-2"] .layer-logo {
				z-index: 100;
				background-size: contain;
				background-position: center;
			}

			/* Moving layers inside wrapper */
			[data-ad="unit-2"] .layer-text,
			[data-ad="unit-2"] .layer-car {
				position: absolute;
				width: 100%;
				height: 100%;
				top: 0;
				left: 0;
				background-size: contain;
				background-position: center;
				background-repeat: no-repeat;
				pointer-events: none;
			}

			[data-ad="unit-2"] .layer-text {
				z-index: 2;
			}

			[data-ad="unit-2"] .layer-car {
				z-index: 3;
			}

			@media (min-width: 768px) {
				.qr-code {
					display: block;
					position: fixed;
					bottom: 40px;
					left: 40px;
					background: white;
					padding: 15px;
					border-radius: 12px;
					box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
				}

				.qr-code-label {
					font-size: 0.75rem;
					color: #374151;
					margin-bottom: 8px;
					font-weight: 500;
				}

				.qr-code-image {
					width: 120px;
					height: 120px;
					border-radius: 8px;
					display: flex;
					align-items: center;
					justify-content: center;
					overflow: hidden;
				}

				.qr-code-image canvas {
					display: block;
					border-radius: 8px;
				}
			}
		</style>

		<!-- Creative background images from config -->
		<style define:vars={{
			adUnit1LayerBackground: config.creatives.adUnit1.layerBackground,
			adUnit1LayerText: config.creatives.adUnit1.layerText,
			adUnit1LayerCar: config.creatives.adUnit1.layerCar,
			adUnit1FloatingRocks: config.creatives.adUnit1.floatingRocks,
			adUnit2LayerBackground: config.creatives.adUnit2.layerBackground,
			adUnit2LayerText: config.creatives.adUnit2.layerText,
			adUnit2LayerCar: config.creatives.adUnit2.layerCar,
			adUnit2LayerForeground: config.creatives.adUnit2.layerForeground,
			adUnit2LayerLogo: config.creatives.adUnit2.layerLogo,
			adUnit2TreeOverlay: config.creatives.adUnit2.treeOverlay
		}}>
			/* ============================================ */
			/* CREATIVE BACKGROUNDS - MANAGED FROM CONFIG */
			/* Update paths in src/config.js */
			/* ============================================ */

			/* Ad Unit 1 - 4 Stacked Layers */
			[data-ad="unit-1"] .layer-background {
				background-image: var(--adUnit1LayerBackground);
			}

			[data-ad="unit-1"] .layer-text {
				background-image: var(--adUnit1LayerText);
			}

			[data-ad="unit-1"] .layer-car {
				background-image: var(--adUnit1LayerCar);
			}

			[data-ad="unit-1"] .rock-overlay {
				background-image: var(--adUnit1FloatingRocks);
			}

			/* Ad Unit 2 - Falling Stack */
			[data-ad="unit-2"] .layer-background {
				background-image: var(--adUnit2LayerBackground);
			}

			[data-ad="unit-2"] .layer-text {
				background-image: var(--adUnit2LayerText);
			}

			[data-ad="unit-2"] .layer-car {
				background-image: var(--adUnit2LayerCar);
			}

			[data-ad="unit-2"] .layer-foreground {
				background-image: var(--adUnit2LayerForeground);
			}

			[data-ad="unit-2"] .layer-logo {
				background-image: var(--adUnit2LayerLogo);
			}

			[data-ad="unit-2"] .tree-overlay {
				background-image: var(--adUnit2TreeOverlay);
			}
		</style>
	</head>
	<body>
		<!-- Easter Egg Modal -->
		<div class="easter-egg-modal" id="easter-egg-modal">
			<div class="easter-egg-content">
				<h2>🎉 Easter Egg Unlocked! 🎉</h2>
				<p>You've discovered the secret Konami code! Check out the bottom ad...</p>
				<button class="easter-egg-close" onclick="document.getElementById('easter-egg-modal').classList.remove('active')">
					Awesome!
				</button>
			</div>
		</div>

		<!-- QR Code (Desktop only) -->
		<div class="qr-code">
			<div class="qr-code-label">View on Mobile</div>
			<div class="qr-code-image">
				<canvas id="qr-canvas"></canvas>
			</div>
		</div>

		<!-- Phone Frame (Desktop only) -->
		<div class="phone-frame">
			<div class="phone-screen">
				<!-- Browser Chrome Top (Desktop only) -->
				<div class="browser-chrome-top">
					<div class="address-bar">blog.example.com</div>
				</div>

				<!-- Mobile Content -->
				<div class="container">
					<!-- Header -->
					<header class="blog-header">
						<h1>The Future of Digital Advertising</h1>
						<div class="blog-meta">
							By Sarah Johnson | October 15, 2025
						</div>
					</header>

					<!-- First Content Section -->
					<section class="content-section">
						<h2>Introduction to Modern Ad Formats</h2>
						<p>
							In today's digital landscape, advertising has evolved far beyond simple banner ads. Modern formats
							leverage cutting-edge technology to create immersive experiences without disrupting content consumption.
						</p>
						<p>
							The most successful campaigns combine data-driven insights with compelling storytelling and innovative
							formats. Rich media, video ads, and interactive experiences are becoming the new standard.
						</p>
						<p>
							One of the most exciting developments has been the integration of motion into display advertising.
							Dynamic formats create visual interest through subtle animations, parallax effects, and responsive
							design elements.
						</p>
					</section>

					<!-- First Ad Unit - Slides UP -->
					<div class="ad-unit" data-ad="unit-1">
						<span class="ad-label">Advertisement</span>
						<div class="ad-content">
							<!-- CREATIVE #1: Managed from src/config.js -->
							<!-- BG outside wrapper = FIXED (doesn't scroll) -->
							<div class="layer-background"></div>
							<!-- Moving layers inside wrapper = ANIMATE (scroll with parallax) -->
							<div class="creative-wrapper parallax-up">
								<div class="layer-text"></div>
								<div class="layer-car"></div>
							</div>
						</div>
						<div class="rock-overlay" aria-hidden="true"></div>
					</div>

					<!-- Second Content Section -->
					<section class="content-section">
						<h2>The Psychology of Attention</h2>
						<p>
							Movement and animation naturally draw the eye, which is why dynamic ad formats can be so effective.
							The key is subtlety and relevance—ads that complement content rather than interrupt it.
						</p>
						<p>
							By tying animations to natural scrolling behavior, we create experiences that feel organic. Studies
							show users are more likely to recall brands advertised through these contextually-integrated formats.
						</p>
					</section>

					<!-- Second Ad Unit - Slides DOWN -->
					<div class="ad-unit" data-ad="unit-2">
						<span class="ad-label">Advertisement</span>
						<div class="tree-overlay" aria-hidden="true"></div>
						<div class="ad-content">
							<!-- CREATIVE #2: Managed from src/config.js -->
							<!-- Background stays fixed -->
							<div class="ad-viewport">
								<div class="layer-background"></div>
								<div class="creative-wrapper parallax-down">
									<!-- Moving layers fall into place -->
									<div class="layer-text"></div>
									<div class="layer-car"></div>
								</div>
								<!-- Foreground overlay fixed on top -->
								<div class="layer-foreground"></div>
								<!-- Logo overlay - highest z-index, fixed position -->
								<div class="layer-logo"></div>
							</div>
						</div>
					</div>

					<!-- Third Content Section -->
					<section class="content-section">
						<h2>Looking Ahead</h2>
						<p>
							AI and machine learning are enabling hyper-personalization at scale, while privacy-first approaches
							reshape targeting and measurement. The fundamental challenge remains: capturing attention in ways
							that are effective, beneficial, and respectful.
						</p>
					</section>
				</div>

				<!-- Browser Chrome Bottom (Desktop only) -->
				<div class="browser-chrome-bottom">
					<div class="nav-button">←</div>
					<div class="nav-button">→</div>
					<div class="nav-button">+</div>
					<div class="nav-button">⊡</div>
					<div class="nav-button">⋯</div>
				</div>
			</div>
		</div>

		<!-- Set base URL for client scripts -->
		<script define:vars={{ baseUrl: import.meta.env.BASE_URL }}>
			window.APP_BASE_URL = baseUrl;
		</script>

		<script>
			import { animate, scroll } from "motion";
			import QRCode from "qrcode";

			// Wait for DOM to be fully loaded
			document.addEventListener('DOMContentLoaded', () => {
				// Konami Code Easter Egg (works everywhere!)
				const konamiCode = ['arrowup', 'arrowup', 'arrowdown', 'arrowdown', 'arrowleft', 'arrowright', 'arrowleft', 'arrowright', 'b', 'a'];
				let konamiIndex = 0;
				let easterEggActivated = false;

				document.addEventListener('keydown', (e) => {
					const key = e.key.toLowerCase();

					console.log('Key pressed:', key, '| Expected:', konamiCode[konamiIndex], '| Index:', konamiIndex);

					if (key === konamiCode[konamiIndex]) {
						konamiIndex++;
						console.log('✓ Match! Progress:', konamiIndex, '/', konamiCode.length);

						if (konamiIndex === konamiCode.length) {
							// Konami code completed!
							console.log('🎉 KONAMI CODE COMPLETED!');

							if (!easterEggActivated) {
								easterEggActivated = true;

								// Swap the text layer image in Ad Unit 2
								const adUnit2TextLayer = document.querySelector('[data-ad="unit-2"] .layer-text');
								if (adUnit2TextLayer) {
									adUnit2TextLayer.style.backgroundImage = `url(${window.APP_BASE_URL}/creatives/adunit2/easter-egg.png)`;
									console.log('Image swapped!');
								}

								// Hide the car layer in Ad Unit 2
								const adUnit2CarLayer = document.querySelector('[data-ad="unit-2"] .layer-car');
								if (adUnit2CarLayer) {
									adUnit2CarLayer.style.backgroundImage = 'none';
									console.log('Car layer hidden!');
								}

								// Show modal
								const modal = document.getElementById('easter-egg-modal');
								if (modal) {
									modal.classList.add('active');
									console.log('Modal shown!');
								}
							}

							konamiIndex = 0;
						}
					} else {
						if (konamiIndex > 0) {
							console.log('✗ Wrong key! Resetting...');
						}
						konamiIndex = 0;
					}
				});

				// Detect if we're on desktop (in phone frame) or mobile
				const isDesktop = window.innerWidth >= 768;
				const scrollContainer = isDesktop ? document.querySelector('.phone-screen') : null;
				const showcaseOffset = 220;
				const smoothDuration = 500; // ms

				// Auto-scroll showcase directly to the first ad unit
				const firstAdUnit = document.querySelector('[data-ad="unit-1"]');
				if (firstAdUnit) {
					const smoothScrollTo = (element, target) => {
						const start = element ? element.scrollTop : window.pageYOffset;
						const change = target - start;
						const startTime = performance.now();

						const animateScroll = (currentTime) => {
							const elapsed = currentTime - startTime;
							const progress = Math.min(elapsed / smoothDuration, 1);
							const eased = progress < 0.5
								? 4 * progress * progress * progress
								: 1 - Math.pow(-2 * progress + 2, 3) / 2;
							const position = start + change * eased;

							if (element) {
								element.scrollTop = position;
							} else {
								window.scrollTo(0, position);
							}

							if (progress < 1) {
								requestAnimationFrame(animateScroll);
							}
						};

						requestAnimationFrame(animateScroll);
					};

					const scrollToFirstAd = () => {
						if (scrollContainer) {
							const containerRect = scrollContainer.getBoundingClientRect();
							const adRect = firstAdUnit.getBoundingClientRect();
							const target = Math.max(
								0,
								scrollContainer.scrollTop + adRect.top - containerRect.top - showcaseOffset
							);
							smoothScrollTo(scrollContainer, target);
						} else {
							const adRect = firstAdUnit.getBoundingClientRect();
							const target = Math.max(0, window.pageYOffset + adRect.top - showcaseOffset);
							smoothScrollTo(null, target);
						}
					};

					// Delay until layout settles to avoid jumpiness
					requestAnimationFrame(() => {
						setTimeout(scrollToFirstAd, 180);
					});
				}

				// First ad unit - starts VISIBLE, slides DOWN/OUT as you scroll
				// Creates transition effect to second ad
				const adUnit1 = document.querySelector('[data-ad="unit-1"] .parallax-up');
				if (adUnit1) {
					const animation1 = animate(
						adUnit1,
						{
							// Start fully visible, slide down and out to bottom
							transform: ["translateY(0%)", "translateY(80%)"]
						},
						{
							ease: "ease-in"
						}
					);

					const scrollOptions = {
						target: adUnit1,
						// Start sliding out as it leaves viewport center
						offset: ["center 50%", "end 30%"]
					};

					// On desktop, track scroll in phone-screen container
					if (scrollContainer) {
						scrollOptions.container = scrollContainer;
					}

					scroll(animation1, scrollOptions);
				}

				// Second ad unit - slides DOWN from above (hidden to visible)
				// Animation starts after 20% visible, completes at center
				const adUnit2 = document.querySelector('[data-ad="unit-2"] .parallax-down');
				if (adUnit2) {
					const animation2 = animate(
						adUnit2,
						{
							// Slide down from above
							transform: ["translateY(-80%)", "translateY(0%)"]
						},
						{
							ease: "ease-out"
						}
					);

					const scrollOptions2 = {
						target: adUnit2,
						// Start animating when ~30% visible, complete at center
						offset: ["start 70%", "center 50%"]
					};

					// On desktop, track scroll in phone-screen container
					if (scrollContainer) {
						scrollOptions2.container = scrollContainer;
					}

					scroll(animation2, scrollOptions2);

				}

				// Generate QR Code
				const qrCanvas = document.getElementById('qr-canvas');
				if (qrCanvas) {
					// Get config from data attribute
					const demoUrl = qrCanvas.dataset.url || window.location.href;
					const qrOptions = JSON.parse(qrCanvas.dataset.options || '{}');

					QRCode.toCanvas(qrCanvas, demoUrl, qrOptions, function (error) {
						if (error) {
							console.error('QR Code generation failed:', error);
						}
					});
				}
			});
		</script>
		<script define:vars={{ demoUrl: config.demoUrl, qrOptions: config.qrCode }}>
			// Pass config to canvas via data attributes
			const canvas = document.getElementById('qr-canvas');
			if (canvas) {
				canvas.dataset.url = demoUrl;
				canvas.dataset.options = JSON.stringify(qrOptions);
			}
		</script>
	</body>
</html>
